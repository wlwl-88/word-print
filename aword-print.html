<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <title>단어장 프린트 템플릿</title>
  <style>
    body { font-family: sans-serif; background: #fafaff; margin: 0; padding: 30px 0;}
    .container { width: 100%; max-width: 520px; margin: auto; }
    .mode-btns { margin-bottom: 18px; text-align: center;}
    button { margin-right: 6px; padding: 7px 15px; border: none; border-radius: 7px; background: #eee; cursor: pointer; font-size: 1em; }
    button.selected { background: #355efc; color: white; }
    #input-area { width:100%; margin:18px 0; text-align: center; }
    #words-input { width:98%; max-width:480px; height:70px; font-size:1em; margin-bottom:10px;}
    table { border-collapse: collapse; width: 100%; min-width:320px; background: #fff;}
    th, td { border: 1px solid #b2b2b2; padding: 10px 8px; font-size: 1.1em; text-align: center; height: 36px;}
    th { background: #e8edff;}
    .word-list { font-size: 1.1em; text-align:left; min-height:36px;}
    .hide { display:none; }
    @media print { body { background: #fff; } #input-area, .mode-btns, #btn-save { display: none; } }
  </style>
</head>
<body>
  <div class="container">
    <div class="mode-btns">
      <button class="selected" id="btn-both">영어+뜻</button>
      <button id="btn-en">영어만</button>
      <button id="btn-ko">뜻만</button>
      <button id="btn-save">이미지로 저장</button>
      <button onclick="window.print()">프린트</button>
    </div>
    <div id="input-area">
      <textarea id="words-input" placeholder="아래 예시처럼 입력하세요:&#10;apple : 사과&#10;benefit : 이익, 혜택&#10;compare : 비교하다"></textarea><br>
      <button id="btn-make">표로 변환</button>
      <div style="font-size:0.95em; color:#888; margin-top:8px;">※ 한 줄에 '영어 : 뜻' 형태로 입력, 최대 20개만 표시</div>
    </div>
    <div id="table-area"></div>
  </div>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
  <script>
    // 상태저장
    let words = [];

    // 표 새로고침
    function renderTable(mode='both') {
      const tableArea = document.getElementById('table-area');
      let html = '<table><thead>';
      if(mode==='both') html += '<tr><th>영어 단어</th><th>뜻</th></tr>';
      else html += '<tr><th>' + (mode==='en'?'영어 단어':'뜻') + '</th></tr>';
      html += '</thead><tbody>';
      // 20칸 고정
      for(let i=0;i<20;i++){
        const item = words[i] || {};
        if(mode==='both'){
          html += `<tr><td>${item.en||''}</td><td>${item.ko||''}</td></tr>`;
        }else if(mode==='en'){
          html += `<tr><td>${item.en||''}</td></tr>`;
        }else if(mode==='ko'){
          html += `<tr><td>${item.ko||''}</td></tr>`;
        }
      }
      html += '</tbody></table>';
      tableArea.innerHTML = html;
    }
    // 토글버튼 처리
    function setMode(mode){
      renderTable(mode);
      document.getElementById('btn-both').classList.toggle('selected', mode==='both');
      document.getElementById('btn-en').classList.toggle('selected', mode==='en');
      document.getElementById('btn-ko').classList.toggle('selected', mode==='ko');
      window.__currentMode = mode;
    }
    document.getElementById('btn-both').onclick = ()=>setMode('both');
    document.getElementById('btn-en').onclick = ()=>setMode('en');
    document.getElementById('btn-ko').onclick = ()=>setMode('ko');
    // 표로 변환 버튼
    document.getElementById('btn-make').onclick = function() {
      const text = document.getElementById('words-input').value;
      const arr = text.split('\n').slice(0,20).map(row=>{
        const sp = row.split(':');
        return {
          en: (sp[0]||'').trim(),
          ko: (sp[1]||'').trim()
        }
      });
      words = arr;
      setMode('both');
    };
    // html2canvas 이미지 저장
    document.getElementById('btn-save').onclick = function() {
      html2canvas(document.getElementById('table-area')).then(canvas => {
        const link = document.createElement('a');
        link.download = 'wordlist.png';
        link.href = canvas.toDataURL();
        link.click();
      });
    };
    // 최초 기본표시
    setMode('both');
  </script>
</body>
</html>
